(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{114:function(e,t,a){e.exports=a(212)},120:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(12),o=a.n(i),c=a(34),s=a(35),l=a(60),m=a(59),u=(a(119),a(120),a(121),a(112)),v=(a(122),a(219)),h=a(223),g=a(217),d=a(42),p=a(220),f=(a(123),a(218)),y=a(109),E=a(224),b=a(222),w=a(221);function N(e){var t=e/10,a=255,n=0;return t<.7&&(n=255),t<=.35&&(a=0),"rgb(".concat(n,", ").concat(a,", 0)")}function M(e){var t=e.value;return""===t||"0"===t?null:r.a.createElement("div",{className:"vote",style:{borderColor:N(t)}},t)}function k(e){var t=e.img,a=""===t?r.a.createElement(d.a,null):r.a.createElement("img",{src:t,alt:""});return r.a.createElement("div",{className:"movie-poster"},r.a.createElement("div",{className:"movie-poster__img-wrapper"},a))}var C=function(e){var t=e.data,a=t.img,n=t.title,i=t.date,o=t.overview,c=t.vote;return r.a.createElement("div",{className:"movie-block"},r.a.createElement(k,{img:a}),r.a.createElement("div",{className:"movie-description"},r.a.createElement("div",{className:"col-1"},r.a.createElement("div",{className:"description-img-wrapper"},r.a.createElement("img",{src:a,alt:""})),r.a.createElement("div",{className:"main-info-wrapper"},r.a.createElement("div",{className:"title"},n),r.a.createElement("div",{className:"date"},function(e){try{var t=new Date(e);return Object(f.a)({locale:y.a},"MMMM d, yyyy")(t)}catch(a){return e}}(i)),r.a.createElement("div",{className:"tags"},r.a.createElement(E.a,null,"Action"),r.a.createElement(E.a,null,"Drama"))),r.a.createElement(M,{value:c})),r.a.createElement("div",{className:"col-2"},r.a.createElement("span",{className:"overview"},function(e){for(var t,a=225,n=e.slice(0,a),r=!1;!r;)(t=n[a-1])>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"?a-=1:r=!0;return(n=n.slice(0,a))+(e.length!==n.length?"...":"")}(o))),r.a.createElement("div",{className:"col-3"},r.a.createElement(b.a,{allowHalf:!0,count:10,defaultValue:5,character:r.a.createElement(w.a,{style:{fontSize:"14px"}})}))))},S=function(){function e(t,a,n){var r=this;Object(c.a)(this,e),this.apiKey="639828d50e7b3c39e3270402fcde3061",this.url="https://api.themoviedb.org/3",this.urlImageDB="https://image.tmdb.org/t/p/w500",this.timerId=null,this.delay=300,this.debounce=function(e,t){return function(){for(var a=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];clearTimeout(this.timerId),this.timerId=setTimeout((function(){e.apply(a,r)}),t)}},this.debouncedGetMoviesFn=this.debounce((function(e,t){fetch(r.createSearchMoviesURL(e,t)).then((function(e){return e.json()})).then((function(e){var t=e.results,a=e.total_pages,n=t.map((function(e){var t=null==e.poster_path?"":r.urlImageDB+e.poster_path;return{id:e.id,title:e.title,overview:e.overview,date:e.release_date,img:t,vote:"".concat(e.vote_average)}}));r.fnGet(n,a)})).catch((function(e){return r.fnError(e.message)}))}),this.delay),this.fnGet=t,this.fnLoading=a,this.fnError=n}return Object(s.a)(e,[{key:"createSearchMoviesURL",value:function(e,t){var a="".concat(this.url,"/search/movie?api_key=").concat(this.apiKey),n=encodeURIComponent(e);return"".concat(a,"&query=").concat(n,"&page=").concat(t)}},{key:"getMovies",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;("string"===typeof e||e instanceof String)&&e.length>0?(this.fnLoading(),this.debouncedGetMoviesFn(e,t)):(clearTimeout(this.timerId),this.fnGet([],0))}}]),e}(),j=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).moviesService=new S((function(t,a){e.setState({movieBlocksData:t,totalPages:a,loading:!1})}),(function(){e.setState({loading:!0})}),(function(t){e.setState({error:!0,errorMessage:t})})),e.state={movieBlocksData:[],totalPages:0,query:"",switchKeys:["search"],loading:!1,error:!1,errorMessage:""},e.onChangePage=function(t){var a=e.state.query;t>0&&e.moviesService.getMovies(a,t)},e.onChangeQuery=function(t){var a=t.target.value.trimLeft();e.setState({query:a}),e.moviesService.getMovies(a)},e.onClickMenu=function(t){e.setState({switchKeys:[t.key]})},e.MoviePagination=function(e){var t=e.total,a=e.onChange;return 0===t?null:r.a.createElement(v.a,{size:"small",pageSize:"1",total:t,showSizeChanger:!1,onChange:a,className:"movie-pagination"})},e.getMovies=function(){var t=e.state,a=t.movieBlocksData,n=t.loading,i=t.error,o=t.errorMessage;if(i){var c="Failed to fetch"===o?"No internet connection":"Server error";return r.a.createElement(h.a,{style:{marginTop:"50px",marginBottom:"100px"},message:"Error:",description:c,type:"error",showIcon:!0})}return n?r.a.createElement(g.a,{tip:"loading...",style:{marginTop:"60px",marginBottom:"100px"}}):a.length?a.map((function(e){var t=e.id,a=Object(u.a)(e,["id"]);return r.a.createElement(C,{key:t,data:a})})):r.a.createElement(d.a,{style:{marginTop:"60px",marginBottom:"100px"}})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state,t=e.totalPages,a=e.query,n=e.switchKeys,i=this.onChangePage,o=this.onChangeQuery,c=this.MoviePagination,s=this.onClickMenu,l=this.getMovies;return r.a.createElement("div",{className:"movie-page"},r.a.createElement("div",{className:"switch"},r.a.createElement(p.a,{onClick:s,selectedKeys:n,mode:"horizontal"},r.a.createElement(p.a.Item,{key:"search"},"Search"),r.a.createElement(p.a.Item,{key:"rated"},"Rated"))),r.a.createElement("input",{type:"search",className:"movie-search",placeholder:"Type to search...",onChange:o,value:a}),r.a.createElement("div",{className:"movies"},l()),r.a.createElement(c,{total:t,onChange:i}))}}]),a}(r.a.Component),O=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-wrapper"},r.a.createElement(j,null))}}]),a}(r.a.PureComponent);a(211);o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.3882aac9.chunk.js.map